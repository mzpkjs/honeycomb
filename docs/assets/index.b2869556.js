const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}};x();class b{constructor(e){this._children=[],this._attributes=new Map,this._tag=e}setAttribute(e,s){this._attributes.set(e,s)}append(e){this._children.push(e)}get tagName(){return this._tag}get attributes(){return this._attributes}get children(){return this._children}}const y=(t,e,...s)=>{const i=new b(t);if(e!==null){for(const o in e)if(e.hasOwnProperty(o)){const r=e[o];i.setAttribute(o,String(r))}}for(const o of s)i.append(o);return i},v=(t,...e)=>y("g",t,...e),E=t=>y("polygon",t),L=t=>{const s=Math.sqrt(3)*25,i=2*25,o=[];for(let r=0;r<6;r++){const n=(r*60-30)*Math.PI/180;o.push([(t.x+t.y%2/2)*s+25*Math.cos(n),t.y*i*.75+25*Math.sin(n)])}return v(null,E({points:o.map(r=>r.join(",")).join(" "),fill:`rgb(${t.x*t.y}, ${t.x*t.y}, ${t.x*t.y})`}))};class O{constructor(e,s){this.shape=()=>L(this),this.x=e,this.y=s}}const g=(t,e)=>{e.tagName,t.tagName;for(const[s,i]of e.attributes)t.getAttribute(s)!==i&&t.setAttribute(s,i);for(let s=0;s<e.children.length;s++){let i=t.children.item(s);i===null&&(i=document.createElementNS("http://www.w3.org/2000/svg",e.children[s].tagName),t.appendChild(i)),g(i,e.children[s])}};class I{constructor(e,s){this._updater=s,this._root=document.createElementNS("http://www.w3.org/2000/svg","g")}update(){const e=this._updater();g(this._root,e)}get reference(){return this._root}}class S{constructor(e,s){this._renderables=new WeakMap,this._camera=s;const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("version","1.1"),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("transform",""),e.append(i),this._canvas=document.createElementNS("http://www.w3.org/2000/svg","g"),this._viewport=document.createElementNS("http://www.w3.org/2000/svg","g"),i.append(this._canvas),this._canvas.append(this._viewport)}render(e){if(!this._renderables.has(e)){const c=new I(this._camera,e.shape);this._renderables.set(e,c),this._viewport.append(c.reference)}const{x:s,y:i}=this._camera.position,{tx:o,ty:r}=this._camera.projection,n=this._camera.zoom;this._canvas.setAttribute("transform",`translate(${o} ${r})`),this._viewport.setAttribute("transform-origin",`${s} ${i}`),this._viewport.setAttribute("transform",`scale(${n}, ${n}) rotate(${this._camera.rotation*(180/Math.PI)})`),this._renderables.get(e).update()}}const p=(t=0,e=0)=>({x:t,y:e}),k=(t,e,s=p())=>(s.x=t.x+e.x,s.y=t.y+e.y,s),u=(t,e,s=p())=>(s.x=t.x-e.x,s.y=t.y-e.y,s),h=(t,e,s=p())=>(s.x=t.x*e,s.y=t.y*e,s),z={scale(t){const e=Math.sqrt(t.a**2+t.c**2),s=Math.sqrt(t.b**2+t.d**2);return{x:e,y:s}},rotation(t){return(Math.PI*1.5+Math.atan2(t.d,t.c))%(Math.PI*2)}},m=(t=0,e=0,s=0,i=0,o=0,r=0)=>({a:t,b:e,c:s,d:i,tx:o,ty:r}),w=()=>m(1,0,0,1,0,0),M=(t,e,s=m())=>(s.a=t.a*Math.cos(e)+t.c*Math.sin(e),s.b=t.b*Math.cos(e)+t.d*Math.sin(e),s.c=t.a*-Math.sin(e)+t.c*Math.cos(e),s.d=t.b*-Math.sin(e)+t.d*Math.cos(e),s.tx=t.tx,s.ty=t.ty,s),f={get:z,create:m,identity:w,rotate:M},N=(t,[e,s])=>t<=e?e:t>=s?s:t,_=class{constructor(t){this.projection=w(),this._element=t}set(t){const{x:e,y:s}=this.dimensions;t.x!==void 0&&(this.projection.tx=t.x+e/2),t.y!==void 0&&(this.projection.ty=t.y+s/2),t.z!==void 0&&(t.z=N(t.z,[_.ZOOM_MINIMUM,_.ZOOM_MAXIMUM]),this.projection.a=t.z,this.projection.d=t.z)}rotate(t){this.projection=M(this.projection,t)}get position(){const{tx:t,ty:e}=this.projection;return u(h(this.dimensions,.5),{x:t,y:e})}get dimensions(){const{offsetWidth:t,offsetHeight:e}=this._element;return{x:t,y:e}}get zoom(){const{x:t,y:e}=f.get.scale(this.projection);return(t+e)/2}get rotation(){return f.get.rotation(this.projection)}};let l=_;l.ZOOM_MAXIMUM=1.75;l.ZOOM_MINIMUM=.25;class j{constructor(e,s){this._state={isActive:!1,origin:{x:0,y:0},current:{x:0,y:0},keys:new Set},this._mousedown=i=>{this._state.isActive=!0,this._state.current=this._camera.position,this._state.origin=d({x:i.clientX,y:i.clientY},this._camera)},this._mouseup=i=>{this._state.isActive=!1},this._mousemove=i=>{if(this._state.isActive){if(this._state.keys.size===0){const o=d({x:i.clientX,y:i.clientY},this._camera),r=1/this._camera.zoom,{x:n,y:a}=k(h(this._state.current,-1),h(u(o,this._state.origin),r));this._camera.set({x:n,y:a})}else if(this._state.keys.has("ShiftLeft")){const r=25e-5*i.movementX*Math.PI*2;this._camera.rotate(r)}}},this._wheel=i=>{if(this._state.keys.size===0){const r=this._camera.zoom-i.deltaY*.001;if(r>l.ZOOM_MINIMUM&&r<l.ZOOM_MAXIMUM){const n=d({x:i.clientX,y:i.clientY},this._camera),{x:a,y:c}=u(h(this._camera.position,-1),h(n,(1-this._camera.zoom/r)*(1/r)*.75));this._camera.set({x:a,y:c,z:r})}else this._camera.set({z:r})}else if(this._state.keys.has("ShiftLeft")){const r=25e-5*i.deltaY*Math.PI*2;this._camera.rotate(r)}},this._keydown=i=>{this._state.keys.add("ShiftLeft")},this._keyup=i=>{this._state.keys.delete("ShiftLeft")},this._element=e,this._camera=s,this._element.addEventListener("mousedown",this._mousedown),this._element.addEventListener("mouseup",this._mouseup),this._element.addEventListener("mousemove",this._mousemove),this._element.addEventListener("wheel",this._wheel),window.addEventListener("keydown",this._keydown),window.addEventListener("keyup",this._keyup),this._state.current=this._camera.position}destroy(){this._element.removeEventListener("mousedown",this._mousedown),this._element.removeEventListener("mouseup",this._mouseup),this._element.removeEventListener("mousemove",this._mousemove),this._element.removeEventListener("wheel",this._wheel),window.removeEventListener("keydown",this._keydown),window.removeEventListener("keyup",this._keyup)}update(){}}const d=(t,e)=>u(t,h(e.dimensions,.5));function $(t){console.log("Your version is:",{BASE_URL:"/honeycomb/",MODE:"production",DEV:!1,PROD:!0}.VITE_VERSION);const e=document.querySelector("#application");if(e){const s=new l(e),i=new j(e,s),o=new S(e,s),r=[];for(let a=0;a<25;a++)for(let c=0;c<25;c++)r.push(new O(c,a));const n=()=>{for(let a=0;a<25;a++)for(let c=0;c<25;c++)o.render(r[a*c]);i.update(),requestAnimationFrame(n)};n(),s.set({x:0,y:0})}}$();
